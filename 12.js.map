{"version":3,"file":"12.js","sources":["webpack:///./src/views/resource/list.vue?27e7","webpack:///./src/views/resource/list.vue?aca9","webpack:///./src/views/resource/list.vue?c046","webpack:///./src/views/resource/list.vue?9e0f","webpack:///./src/api/resources.js","webpack:///./src/views/resource/list.vue","webpack:///./src/views/resource/list.vue?a568","webpack:///./src/views/resource/list.vue?7cb1","webpack:///./src/views/resource/list.vue?3c1d"],"sourcesContent":["import _defineProperty from \"/home/runner/work/opentmi-default-gui/opentmi-default-gui/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { resourceList } from '@/api/resources';\nexport default {\n  name: 'ResourceList',\n  filters: {\n    pretty: function pretty(value) {\n      return JSON.stringify(value, null, 2);\n    }\n  },\n  data: function data() {\n    return {\n      fields: [{\n        key: 'cre.time',\n        sortable: true,\n        label: 'Created at'\n      }, {\n        key: 'name',\n        sortable: true\n      }, {\n        key: 'type',\n        sortable: true\n      }, {\n        key: 'status.value',\n        sortable: true,\n        label: 'Status'\n      }],\n      reload: this._.debounce(this._reload, 2000),\n      total: 0,\n      sortBy: 'cre.time',\n      sortDesc: true,\n      listLoading: false,\n      listQuery: {\n        page: 1,\n        limit: 10\n      }\n    };\n  },\n  watch: {\n    listQuery: {\n      handler: function handler() {\n        this.reload();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    lengthLimiter: function lengthLimiter(value) {\n      var maxLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n      var out = value.substr(0, maxLength);\n\n      if (value.length > maxLength) {\n        out += '...';\n      }\n\n      return out;\n    },\n    rowClicked: function rowClicked(row) {\n      this.$set(row, '_showDetails', !row._showDetails);\n    },\n    updateList: function updateList(page) {\n      this.listQuery.page = page;\n      this.reload();\n    },\n    _reload: function _reload() {\n      this.$root.$emit('bv::refresh::table', 'my-table');\n    },\n    _getList: function _getList() {\n      var _this = this;\n\n      var query = this._.omitBy(this.listQuery, this._.isNil);\n\n      query.l = query.limit;\n      query.sk = (query.page - 1) * query.limit;\n\n      if (this.sortBy) {\n        query.s = _defineProperty({}, this.sortBy, this.sortDesc ? -1 : 1);\n      } else {\n        query.s = '{\"cre.time\": -1}';\n      }\n\n      this._.unset(query, 'limit');\n\n      this._.unset(query, 'page');\n\n      var countQuery = this._.merge({\n        t: 'count'\n      }, this._.omit(query, ['s', 'l', 'sk']));\n\n      return resourceList(countQuery).then(function (_ref) {\n        var data = _ref.data;\n        _this.total = data.count;\n        return resourceList(query);\n      }).then(function (_ref2) {\n        var data = _ref2.data;\n        return data;\n      }).catch(function (error) {\n        console.error(error);\n        _this.total = 0; // Returning an empty array, allows table to correctly handle\n        // internal busy state in case of error\n\n        return [];\n      });\n    }\n  }\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"app-container\" },\n    [\n      _c(\"b-table\", {\n        staticClass: \"mt-3\",\n        attrs: {\n          id: \"my-table\",\n          striped: \"\",\n          hover: \"\",\n          items: _vm._getList,\n          fields: _vm.fields,\n          busy: _vm.listLoading,\n          responsive: \"sm\",\n          \"no-local-sorting\": \"\",\n          \"primary-key\": \"_id\",\n          \"sort-changed\": _vm.listLoading,\n          \"sort-by\": _vm.sortBy,\n          \"sort-desc\": _vm.sortDesc,\n          selectable: \"\",\n          \"select-mode\": \"single\"\n        },\n        on: {\n          \"update:busy\": function($event) {\n            _vm.listLoading = $event\n          },\n          \"update:sortBy\": function($event) {\n            _vm.sortBy = $event\n          },\n          \"update:sort-by\": function($event) {\n            _vm.sortBy = $event\n          },\n          \"update:sortDesc\": function($event) {\n            _vm.sortDesc = $event\n          },\n          \"update:sort-desc\": function($event) {\n            _vm.sortDesc = $event\n          },\n          \"row-clicked\": _vm.rowClicked\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"top-row\",\n            fn: function(data) {\n              return _vm._l(data.fields, function(field) {\n                return _c(\"td\", { key: field.key }, [\n                  field.key == \"type\"\n                    ? _c(\n                        \"select\",\n                        {\n                          directives: [\n                            {\n                              name: \"model\",\n                              rawName: \"v-model\",\n                              value: _vm.listQuery[field.key],\n                              expression: \"listQuery[field.key]\"\n                            }\n                          ],\n                          on: {\n                            change: function($event) {\n                              var $$selectedVal = Array.prototype.filter\n                                .call($event.target.options, function(o) {\n                                  return o.selected\n                                })\n                                .map(function(o) {\n                                  var val = \"_value\" in o ? o._value : o.value\n                                  return val\n                                })\n                              _vm.$set(\n                                _vm.listQuery,\n                                field.key,\n                                $event.target.multiple\n                                  ? $$selectedVal\n                                  : $$selectedVal[0]\n                              )\n                            }\n                          }\n                        },\n                        [\n                          _c(\"option\"),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"system\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"dut\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"instrument\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"accessories\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"computer\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"room\")])\n                        ]\n                      )\n                    : field.key == \"status.value\"\n                    ? _c(\n                        \"select\",\n                        {\n                          directives: [\n                            {\n                              name: \"model\",\n                              rawName: \"v-model\",\n                              value: _vm.listQuery[field.key],\n                              expression: \"listQuery[field.key]\"\n                            }\n                          ],\n                          on: {\n                            change: function($event) {\n                              var $$selectedVal = Array.prototype.filter\n                                .call($event.target.options, function(o) {\n                                  return o.selected\n                                })\n                                .map(function(o) {\n                                  var val = \"_value\" in o ? o._value : o.value\n                                  return val\n                                })\n                              _vm.$set(\n                                _vm.listQuery,\n                                field.key,\n                                $event.target.multiple\n                                  ? $$selectedVal\n                                  : $$selectedVal[0]\n                              )\n                            }\n                          }\n                        },\n                        [\n                          _c(\"option\"),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"active\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"maintenance\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"storage\")]),\n                          _vm._v(\" \"),\n                          _c(\"option\", [_vm._v(\"broken\")])\n                        ]\n                      )\n                    : _c(\"input\", {\n                        directives: [\n                          {\n                            name: \"model\",\n                            rawName: \"v-model\",\n                            value: _vm.listQuery[field.key],\n                            expression: \"listQuery[field.key]\"\n                          }\n                        ],\n                        attrs: { placeholder: field.label },\n                        domProps: { value: _vm.listQuery[field.key] },\n                        on: {\n                          keyup: function($event) {\n                            if (\n                              !$event.type.indexOf(\"key\") &&\n                              _vm._k(\n                                $event.keyCode,\n                                \"enter\",\n                                13,\n                                $event.key,\n                                \"Enter\"\n                              )\n                            ) {\n                              return null\n                            }\n                            return _vm._reload($event)\n                          },\n                          input: function($event) {\n                            if ($event.target.composing) {\n                              return\n                            }\n                            _vm.$set(\n                              _vm.listQuery,\n                              field.key,\n                              $event.target.value\n                            )\n                          }\n                        }\n                      })\n                ])\n              })\n            }\n          },\n          {\n            key: \"cell(cre.time)\",\n            fn: function(ref) {\n              var value = ref.value\n              return [\n                _c(\"i\", [\n                  _vm._v(_vm._s(_vm._f(\"moment\")(value, \"MM/DD/YYYY hh:mm\")))\n                ])\n              ]\n            }\n          },\n          {\n            key: \"row-details\",\n            fn: function(row) {\n              return [_c(\"pre\", [_vm._v(_vm._s(_vm._f(\"pretty\")(row.item)))])]\n            }\n          }\n        ])\n      }),\n      _vm._v(\" \"),\n      _c(\"b-pagination\", {\n        attrs: {\n          \"total-rows\": _vm.total,\n          \"per-page\": _vm.listQuery.limit,\n          \"aria-controls\": \"my-table\",\n          \"first-number\": \"\",\n          \"last-number\": \"\"\n        },\n        model: {\n          value: _vm.listQuery.page,\n          callback: function($$v) {\n            _vm.$set(_vm.listQuery, \"page\", $$v)\n          },\n          expression: \"listQuery.page\"\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.tooltip .tooltip-inner{\\n  max-width: 500px !important;\\n  width: 400px !important;\\n}\\n\", \"\"]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"43ba36da\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\", function() {\n     var newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import request from '@/utils/request';\nexport function searchResource(id) {\n  return request({\n    url: \"/api/v0/resources/\".concat(id),\n    method: 'get'\n  });\n}\nexport function resourceList(query) {\n  return request({\n    url: '/api/v0/resources',\n    method: 'get',\n    params: query\n  });\n}\nexport function getSchema(_) {\n  return request({\n    url: \"/api/v0/schemas/Resource.json\",\n    method: 'get'\n  }).then(function (_ref) {\n    var data = _ref.data;\n    var schema = data.schema;\n    return schema;\n  });\n}","import { render, staticRenderFns } from \"./list.vue?vue&type=template&id=a774f256&\"\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/opentmi-default-gui/opentmi-default-gui/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('a774f256')) {\n      api.createRecord('a774f256', component.options)\n    } else {\n      api.reload('a774f256', component.options)\n    }\n    module.hot.accept(\"./list.vue?vue&type=template&id=a774f256&\", function () {\n      api.rerender('a774f256', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/resource/list.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"fc6c80c8-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list.vue?vue&type=template&id=a774f256&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/KA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}