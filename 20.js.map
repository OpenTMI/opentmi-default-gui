{"version":3,"file":"20.js","sources":["webpack:///./src/views/resource/tree.vue?80c9","webpack:///./src/views/resource/tree.vue?fedf","webpack:///./src/api/resources.js","webpack:///./src/views/resource/tree.vue","webpack:///./src/views/resource/tree.vue?dc28","webpack:///./src/views/resource/tree.vue?c55e"],"sourcesContent":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\nimport VJstree from 'vue-jstree';\nimport { resourceList } from '@/api/resources';\nexport default {\n  name: 'ResultTree',\n  components: {\n    VJstree: VJstree\n  },\n  data: function data() {\n    return {\n      treeData: [],\n      loadData: this._.debounce(this._loadData, 250)\n    };\n  },\n  methods: {\n    _query: function _query(filters) {\n      var query = {\n        f: \"_id name\"\n      };\n      return this._.merge(query, filters);\n    },\n    _loadData: function _loadData(node, resolve) {\n      var id = node.data.id ? node.data.id : 0;\n      var _node$data = node.data,\n          level = _node$data.level,\n          type = _node$data.type,\n          _node$data$filters = _node$data.filters,\n          filters = _node$data$filters === void 0 ? {} : _node$data$filters;\n\n      if (id === 0) {\n        this.getRoot().then(resolve);\n      } else if (type === 'rooms') {\n        if (level === 0) {\n          // room\n          var options = {\n            level: 1,\n            type: type,\n            filters: {\n              type: 'room'\n            }\n          };\n          this.getDistinct(options).then(resolve);\n        } else if (level === 1) {\n          // system\n          var _options = {\n            level: 2,\n            type: type,\n            filters: filters\n          };\n          this.getDistinct(_options).then(resolve);\n        } else if (level === 2) {\n          // computer\n          var _options2 = {\n            level: 3,\n            type: type,\n            filters: filters\n          };\n          return this.getDistinct(_options2).then(resolve);\n        } else {\n          var icon = undefined; // 'fa fa-check icon-state-success'\n\n          var isLeaf = true;\n          var _options3 = {\n            level: 4,\n            type: type,\n            filters: filters,\n            isLeaf: isLeaf,\n            icon: icon\n          };\n          return this.getDistinct(_options3).then(resolve);\n        }\n      } else {\n        resolve([]);\n      }\n    },\n    getRoot: function getRoot() {\n      return Promise.resolve([{\n        text: 'rooms',\n        level: 0,\n        type: 'rooms',\n        isLeaf: false\n      } // { text: 'system', level: 0, type: 'systems', isLeaf: false },\n      // { text: 'dut', level: 0, type: 'duts', isLeaf: false }\n      ]);\n    },\n    getDistinct: function getDistinct(_ref) {\n      var _this = this;\n\n      var level = _ref.level,\n          _ref$filters = _ref.filters,\n          filters = _ref$filters === void 0 ? {} : _ref$filters,\n          type = _ref.type,\n          _ref$isLeaf = _ref.isLeaf,\n          isLeaf = _ref$isLeaf === void 0 ? false : _ref$isLeaf,\n          icon = _ref.icon;\n\n      var query = this._query(filters);\n\n      return resourceList(query).then(function (_ref2) {\n        var data = _ref2.data;\n\n        var mapper = function mapper(obj) {\n          var text = obj.name;\n\n          var filters = _this._.merge(filters, {\n            parent: obj._id\n          });\n\n          return {\n            text: text,\n            level: level,\n            isLeaf: isLeaf,\n            icon: icon,\n            type: type,\n            filters: filters\n          };\n        };\n\n        var treeData = _this._.map(data, mapper);\n\n        return treeData;\n      });\n    },\n    itemClick: function itemClick(node, item, e) {\n      // eslint-disable-next-line no-console\n      console.log(node.model.text + ' clicked !', item, e);\n    }\n  }\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"app-container\" },\n    [\n      _c(\"v-jstree\", {\n        attrs: { data: _vm.treeData, async: _vm.loadData },\n        on: { \"item-click\": _vm.itemClick }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import request from '@/utils/request';\nexport function searchResource(id) {\n  return request({\n    url: \"/api/v0/resources/\".concat(id),\n    method: 'get'\n  });\n}\nexport function resourceList(query) {\n  return request({\n    url: '/api/v0/resources',\n    method: 'get',\n    params: query\n  });\n}\nexport function getSchema(_) {\n  return request({\n    url: \"/api/v0/schemas/Resource.json\",\n    method: 'get'\n  }).then(function (_ref) {\n    var data = _ref.data;\n    var schema = data.schema;\n    return schema;\n  });\n}","import { render, staticRenderFns } from \"./tree.vue?vue&type=template&id=a2a06c56&\"\nimport script from \"./tree.vue?vue&type=script&lang=js&\"\nexport * from \"./tree.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/opentmi-default-gui/opentmi-default-gui/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('a2a06c56')) {\n      api.createRecord('a2a06c56', component.options)\n    } else {\n      api.reload('a2a06c56', component.options)\n    }\n    module.hot.accept(\"./tree.vue?vue&type=template&id=a2a06c56&\", function () {\n      api.rerender('a2a06c56', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/resource/tree.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tree.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"fc6c80c8-vue-loader-template\\\"}!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tree.vue?vue&type=template&id=a2a06c56&\""],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtIA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;A","sourceRoot":""}